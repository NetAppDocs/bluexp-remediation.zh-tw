---
sidebar: sidebar 
permalink: reference-template-building-blocks.html 
keywords: templates, conditions, conditional actions, template controls, passing values 
summary: 您可以在建立範本時使用某些功能、以便在動作之間傳遞值（例如磁碟區名稱）、有條件地將動作連結在一起（在新磁碟區上啟用備份）、以及在使用範本時協助使用者自訂資源。 
---
= 範本建置區塊
:hardbreaks:
:allow-uri-read: 
:nofooter: 
:icons: font
:linkattrs: 
:imagesdir: ./media/


[role="lead"]
您可以在建立範本時使用某些功能、以便在動作之間傳遞值（例如磁碟區名稱）、有條件地將動作連結在一起（在新磁碟區上啟用備份）、以及在使用範本時協助使用者自訂資源。



== 特殊範本控制項

在開始建立範本之前、您應該先瞭解一些特殊選項、以便在範本中預先填入參數值時設定這些選項。

image:screenshot_template_options.png["可編輯及偏移選項的螢幕擷取畫面、您可以設定參數值。"]



=== 可編輯核取方塊

核取此方塊可讓儲存管理員覆寫您在範本中輸入的預先填入值。這可讓儲存設備管理員建議應使用的值、但可讓他們在建立資源時自訂值。

取消核取時、使用者無法變更值、而且系統管理員部署資源時、一律會使用範本中的硬編碼值。



=== 偏移核取方塊

核取此方塊、以便Cloud Manager在使用範本建立資源時、監控您為參數輸入的硬編碼值。稍後、您可以執行「DrivFT報告」、查看哪些已設定為「DrivFT」的欄位不再符合範本設定。

取消核取時、使用者可以在建立資源之後、將值變更為任何值。


NOTE: 為使飄移特徵正常運作、在範本中定義某些參數的偏移之後、您必須啟用範本的偏移特徵。這是建立範本的最後一個步驟。如果已啟用參數但尚未在範本上啟用、就無法使用偏移。



=== 在欄位中使用規則運算式（regex）

範本中有幾個欄位可讓您輸入regex、以定義管理員可以在欄位中輸入的值、例如「Volume Name」（Volume名稱）和「Share Name」（共用名稱）。

image:screenshot_template_regex.png["使用regex定義Volume名稱允許值的快照。"]

例如、如果您輸入「#[a-zA-Z][0-9a-zA-Z_]｛0、149｝$」作為Volume名稱的regex、則表示「_名稱應以字母字元開頭、只能包含數字、字母或底線、長度_應為150個或更少字元。」



== 在範本動作之間傳遞值

範本能夠使用先前動作的資訊、在未來的行動中填入欄位。例如、當定義將啟用Cloud Backup功能的磁碟區名稱時、您可以指示備份動作使用儲存設備管理員在「Create Cloud Volumes ONTAP 」（建立）動作中輸入的磁碟區名稱值。

AppTemplate服務可使用三種類型的資訊：

* 輸入值：這是儲存設備管理員在先前範本動作的欄位中輸入的實際值。
* 輸出值：這是Cloud Manager從先前的範本動作建立資源後所產生的價值。
* 輸入您自己的值-這是您輸入的值、無法從範本中的先前動作存取。


例如、若要在磁碟區上啟用法規遵循掃描、Cloud Data Sense服務需要儲存設備管理員輸入的「Volume name」（磁碟區名稱）（輸入值）、以及Cloud Manager在建立磁碟區時產生的「Volume uuid」（輸出值）。

下圖顯示如何在範本的「Cloud Data Sense Action（雲端資料感測行動）」區段中輸入此資訊。

image:screenshot_template_variable_input_output.png["顯示如何使用在先前動作中輸入的值、在其他動作中填入欄位的圖例。"]



== 根據邏輯陳述、使用條件來執行不同的動作

條件會根據儲存設備管理員執行範本時的條件是真的還是假、讓範本執行不同的動作。您可以選取*邏輯條件*動作來新增條件：

image:screenshot_template_select_condition.png["如何在範本中新增條件式陳述式的快照。"]

例如、您可能有一項準則、指出如果某個磁碟區的容量大於50 GB、則必須在該磁碟區上啟用Cloud Backup。如果磁碟區容量較小、則不會啟用Cloud Backup。您可以在範本中實作此功能、如下所示。

image:screenshot_template_condition_example.png["快照顯示範本中的條件如何用於有條件地啟用Cloud Backup。"]

條件包含兩個部分：

* 規則-您要檢查的項目為真或假。
* 和/或聲明：可讓您使用多個規則、進一步調整是否新增其他動作。


規則由三個部分組成：

*來源欄位*：您將從中取得值進行比較的位置。

* 從行動取得輸入值：儲存設備管理員在先前範本行動的欄位中輸入的實際值。
* 從行動取得輸出值：從先前的範本動作建立資源之後所產生的Cloud Manager價值。
* Enter Value（輸入值）-這是您輸入的值、無法從範本中的先前動作存取。這可以是現有資源的值、例如現有的Volume。


*運算子*-用於比較的運算子。選項包括*等*、*不等於*、*大於*、*小於*、*大於或等於*、*小於或等於*。

*欄位值*-您要比較的實際值。選項與_來源欄位_的選項相同。

和/或陳述式可讓您在使用者執行範本時、根據多個規則是否被評估為「真」或「假」、有條件地新增更多動作。*和*要求所有規則為真或假、而*或*只需要其中一個規則為真或假。

在規則中同時使用和和或陳述式時、評估程序會遵循標準的數學順序、其中「和」會在「OR」之前。例如：

* <Rule1>或<Rule2>和<Rule3>
+
此陳述式的評估順序如下：<Rule1>或（<Rule>>和<Rule3>）


